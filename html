<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
</head>

<body>

  <button data-js-btn-engine-work>Завести</button>
  <button data-js-btn-engine-notwork>Заглушить</button><br>
  <button data-js-btn-car-race>Ехать</button>
  <button data-js-btn-car-notrace>Стоять</button><br>
  <button data-js-btn-wheel-lf>Левое переднее</button>
  <button data-js-btn-wheel-rf>Правое переднее</button><br>
  <button data-js-btn-wheel-lr>Левое заднее</button>
  <button data-js-btn-wheel-rr>Правое заднее</button>
  
  <div id="car" class="car">
    <span class="engine"></span><br>
    <span class="race"></span><br>
    <span class="wheel"></span>
  </div>
  
  <script>
  
    function Car(){
      this.race = false;
      
      this.getRace = function() {
        return this.race;
      };
      
      this.setRace = function(state) {
        this.race = state;
        view.renderCarRace(state);
      };
      
      return this.race;
    };
    
    function Engine() {
      this.work = false;
      
      this.getWork = function() {
        return this.work;
      };
      
      this.setWork = function(state) {
        this.work = state;
        view.renderEngineWork(state);
        if (!state) { wheelLF.setRotate(state); };
      };
      
      return this.work;
    };
    
    function Wheel(num, left, front) {
      this.num = num;
      this.left = left;
      this.front = front;
      this.rotate = false;
      
      this.getRotate = function() {
        return this.rotate;
      };
      
      this.setRotate = function(state) {
        if (engine.work) {
          this.rotate = state;
          car.setRace(state);
        } else {
          this.rotate = false;
          car.setRace(false);
        };
      };
        
      return this.rotate;
    };
    
    Wheel.prototype.getInfo = function() {
      view.renderWheelInfo(this.left, this.front);
    };
    
    function View() {
      this.engineWork = 'Двигатель работает';
      this.engineNotWork = 'Двигатель не работает';
      this.wheelRotate = 'Колёса крутятся';
      this.wheelNotRotate = 'Колёса не крутятся';
      this.carRace = 'Машина едет';
      this.carNotRace = 'Машина не едет';
      this.wheelLeft = 'Левое ';
      this.wheelRight = 'Правое ';
      this.wheelFront = 'переднее колесо';
      this.wheelRear = 'заднее колесо';
      
      this.renderEngineWork = function(state) {
        if (state) {
          document.querySelector('.engine').innerHTML = this.engineWork;
        } else {
          document.querySelector('.engine').innerHTML = this.engineNotWork;
        };
        
      };
      
      this.renderWheelInfo = function(left, front) {
        if (left) {
          document.querySelector('.wheel').innerHTML = this.wheelLeft;
        } else {
          document.querySelector('.wheel').innerHTML = this.wheelRight;
        };
        if (front) {
          document.querySelector('.wheel').innerHTML += this.wheelFront;
        } else {
          document.querySelector('.wheel').innerHTML += this.wheelRear;
        };
          
      };
      
      this.renderCarRace = function(state) {
        if (state) {
          document.querySelector('.race').innerHTML = this.carRace;
        } else {
          document.querySelector('.race').innerHTML = this.carNotRace;
        };
      };
      
      this.onButtonEngineWorkClick = function() {
        engine.setWork(true);
      };
      
      this.onButtonEngineNotWorkClick = function() {
        engine.setWork(false);
      };
      
      this.onButtonCarRaceClick = function() {
        wheelLF.setRotate(true);
      };
      
      this.onButtonCarNotRaceClick = function() {
        wheelLF.setRotate(false);
      };
      
      this.onButtonWheelLFClick = function() {
        wheelLF.getInfo();
      };
      
      this.onButtonWheelRFClick = function() {
        wheelRF.getInfo();
      };
      
      this.onButtonWheelLRClick = function() {
        wheelLR.getInfo();
      };
      
      this.onButtonWheelRRClick = function() {
        wheelRR.getInfo();
      };
      
    };
    
    var car = new Car();
    var engine = new Engine();
    var wheelLF = new Wheel(0, true, true);
    var wheelRF = new Wheel(1, false, true);
    var wheelLR = new Wheel(2, true, false);
    var wheelRR = new Wheel(3, false, false);
    var view = new View();
    
    document.querySelector('[data-js-btn-engine-work]').addEventListener('click', view.onButtonEngineWorkClick);
    document.querySelector('[data-js-btn-engine-notwork]').addEventListener('click', view.onButtonEngineNotWorkClick);
    document.querySelector('[data-js-btn-car-race]').addEventListener('click', view.onButtonCarRaceClick);
    document.querySelector('[data-js-btn-car-notrace]').addEventListener('click', view.onButtonCarNotRaceClick);
    document.querySelector('[data-js-btn-wheel-lf]').addEventListener('click', view.onButtonWheelLFClick);
    document.querySelector('[data-js-btn-wheel-rf]').addEventListener('click', view.onButtonWheelRFClick);
    document.querySelector('[data-js-btn-wheel-lr]').addEventListener('click', view.onButtonWheelLRClick);
    document.querySelector('[data-js-btn-wheel-rr]').addEventListener('click', view.onButtonWheelRRClick);
    
    view.renderEngineWork(false);
    view.renderCarRace(false);
    view.renderWheelInfo(true, true);
    
  </script>
  
</body>

</html>
